{% extends 'core/base.html' %}
{% load static %}

{% block base_subtitle %}
    Dashboard
{% endblock %}

{% block base_subhead_heading %}
    Dashboard
{% endblock %}

{% block base_content %}

    {# TOP STATISTICS #}
    <div class="row">

        <div class="col-sm-6 col-lg-3">
            <div class="card card-sm">
                <div class="card-body">
                    <div class="row align-items-center">
                        <div class="col-auto">
                            <span class="bg-primary text-white avatar">
                              <svg xmlns="http://www.w3.org/2000/svg" class="icon" width="24" height="24"
                                   viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none"
                                   stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"
                                                                                        fill="none"></path><path
                                      d="M16.7 8a3 3 0 0 0 -2.7 -2h-4a3 3 0 0 0 0 6h4a3 3 0 0 1 0 6h-4a3 3 0 0 1 -2.7 -2"></path><path
                                      d="M12 3v3m0 12v3"></path>
                              </svg>
                            </span>
                        </div>
                        <div class="col">
                            <div class="font-weight-medium">
                                100 User
                            </div>
                            <div class="text-muted">
                                12 in-active users
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-sm-6 col-lg-3">
            <div class="card card-sm">
                <div class="card-body">
                    <div class="row align-items-center">
                        <div class="col-auto">
                            <span class="bg-success text-white avatar">
                              <svg xmlns="http://www.w3.org/2000/svg"
                                   class="icon icon-tabler icon-tabler-user-check" width="24" height="24"
                                   viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none"
                                   stroke-linecap="round" stroke-linejoin="round">
                                           <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
                                           <circle cx="9" cy="7" r="4"></circle>
                                           <path d="M3 21v-2a4 4 0 0 1 4 -4h4a4 4 0 0 1 4 4v2"></path>
                                           <path d="M16 11l2 2l4 -4"></path>
                              </svg>
                            </span>
                        </div>
                        <div class="col">
                            <div class="font-weight-medium">
                                100 Employees
                            </div>
                            <div class="text-muted">
                                02 Staff Members
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-sm-6 col-lg-3">
            <div class="card card-sm">
                <div class="card-body">
                    <div class="row align-items-center">
                        <div class="col-auto">
                            <span class="bg-warning text-white avatar">
                              <svg xmlns="http://www.w3.org/2000/svg"
                                   class="icon icon-tabler icon-tabler-users" width="24" height="24"
                                   viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none"
                                   stroke-linecap="round" stroke-linejoin="round">
                                           <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
                                           <circle cx="9" cy="7" r="4"></circle>
                                           <path d="M3 21v-2a4 4 0 0 1 4 -4h4a4 4 0 0 1 4 4v2"></path>
                                           <path d="M16 3.13a4 4 0 0 1 0 7.75"></path>
                                           <path d="M21 21v-2a4 4 0 0 0 -3 -3.85"></path>
                                        </svg>
                            </span>
                        </div>
                        <div class="col">
                            <div class="font-weight-medium">
                                100 Clients
                            </div>
                            <div class="text-muted">
                                12010 available sites
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-sm-6 col-lg-3">
            <div class="card card-sm">
                <div class="card-body">
                    <div class="row align-items-center">
                        <div class="col-auto">
                            <span class="bg-danger text-white avatar">
                              <svg xmlns="http://www.w3.org/2000/svg"
                                   class="icon icon-tabler icon-tabler-calendar-event" width="24" height="24"
                                   viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none"
                                   stroke-linecap="round" stroke-linejoin="round">
                                           <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
                                           <rect x="4" y="5" width="16" height="16" rx="2"></rect>
                                           <line x1="16" y1="3" x2="16" y2="7"></line>
                                           <line x1="8" y1="3" x2="8" y2="7"></line>
                                           <line x1="4" y1="11" x2="20" y2="11"></line>
                                           <rect x="8" y="15" width="2" height="2"></rect>
                                        </svg>
                            </span>
                        </div>
                        <div class="col">
                            <div class="font-weight-medium">
                                Shifts
                            </div>
                            <div class="text-muted">
                                12 shifts today
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

    </div>

    <div class="row mt-4">
        <div class="col-sm-12">
            <div class="card">
                <div class="card-header">
                    <h3 class="card-title">Active Shifts Today</h3>
                </div>

                {% if shifts_days %}
                    <div class="table-responsive">
                        <table class="table card-table table-vcenter text-nowrap datatable">
                            <thead>
                            <tr>
                                <th>Type</th>
                                <th>Start Date</th>
                                <th>End Date</th>
                                <th>Start Time</th>
                                <th>End Time</th>
                                <th>Client</th>
                                <th>Employee</th>
                                <th>-</th>
                            </tr>
                            </thead>
                            <tbody>

                            {% for object in shifts_days %}
                                <tr>
                                    <td>
                                        {% if object.shift.get_job_type_display == "Pattern" %}
                                            <span class="badge bg-purple-lt">{{ object.shift.get_job_type_display }}</span>
                                        {% else %}
                                            <span class="badge bg-teal-lt">{{ object.shift.get_job_type_display }}</span>
                                        {% endif %}
                                    </td>
                                    <td>{{ object.shift_date }}</td>
                                    <td>{{ object.shift_end_date }}</td>
                                    <td>{{ object.shift_time }}</td>
                                    <td>{{ object.shift_end_time }}</td>
                                    <td>{{ object.shift.client.name }}</td>
                                    <td>
                                        {% if object.employee %}
                                            <a href="{% url 'admins:user-detail' object.employee.user.pk %}">
                                                <b>
                                                    <span class="badge bg-success me-1"></span>
                                                    {{ object.employee.user.get_user_name }}
                                                </b>
                                            </a>
                                        {% else %}
                                            <b class="text-danger">
                                                <span class="badge bg-danger me-1"></span> Un Assigned
                                            </b>
                                        {% endif %}
                                    </td>
                                    <th>
                                        <a href="{% url 'admins:shift-detail' object.shift.pk %}">
                                            <b>View</b>
                                        </a>
                                    </th>
                                </tr>
                            {% endfor %}
                            </tbody>
                        </table>
                    </div>

                    </div>
                {% else %}
                    <div class="card-body">
                        <p class="text-danger"><b>No active shifts available today</b></p>
                    </div>
                {% endif %}

            </div>
        </div>

{% endblock %}
