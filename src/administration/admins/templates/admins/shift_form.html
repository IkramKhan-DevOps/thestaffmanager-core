{% extends 'core/base.html' %}
{% load static %}
{% load crispy_forms_tags %}

{% block base_title %}admins | Shifts {% endblock %}
{% block base_subhead_heading %}Shifts {% endblock %}
{% block base_subhead_paragraph %}Shifts create/update form{% endblock %}

{% block base_subhead_button %}
    <a class="btn btn-primary" href="{% url 'admins:position-list' %}"><i class="fa fa-arrow-left"></i> View Shifts</a>
{% endblock %}

{% block base_css %}
    <link rel="stylesheet"
          href="https://cdnjs.cloudflare.com/ajax/libs/jquery-datetimepicker/2.5.20/jquery.datetimepicker.min.css"
          integrity="sha256-DOS9W6NR+NFe1fUhEE0PGKY/fubbUCnOfTje2JMDw3Y=" crossorigin="anonymous"/>
{% endblock %}


{% block base_content %}

    <div class="row justify-content-center">
        <div class="col-sm-6">
            <div class="card">
                <div class="card-body">

                    <form method="post">
                        {% csrf_token %}
                        {{ form|crispy }}
                    </form>

                </div>
                <div class="card-body border-top" id="customize">
                    <div>

                        <div id="weekly">
                            <div class="form-group row">
                                <div class="col-md-9">
                                    <div class="checkbox my-2">
                                        <div class="custom-control custom-checkbox">
                                            <input type="checkbox" class="custom-control-input"
                                                   id="monday" data-parsley-multiple="groups"
                                                   data-parsley-mincheck="2" checked>
                                            <label class="custom-control-label" for="monday">
                                                Monday
                                            </label>
                                        </div>
                                        <div class="custom-control custom-checkbox">
                                            <input type="checkbox" class="custom-control-input"
                                                   id="tuesday" data-parsley-multiple="groups"
                                                   data-parsley-mincheck="2" checked>
                                            <label class="custom-control-label" for="tuesday">
                                                Tuesday
                                            </label>
                                        </div>
                                        <div class="custom-control custom-checkbox">
                                            <input type="checkbox" class="custom-control-input"
                                                   id="wednesday" data-parsley-multiple="groups"
                                                   data-parsley-mincheck="2" checked>
                                            <label class="custom-control-label" for="wednesday">
                                                Wednesday
                                            </label>
                                        </div>
                                        <div class="custom-control custom-checkbox">
                                            <input type="checkbox" class="custom-control-input"
                                                   id="thursday" data-parsley-multiple="groups"
                                                   data-parsley-mincheck="2" checked>
                                            <label class="custom-control-label" for="thursday">
                                                Thursday
                                            </label>
                                        </div>
                                        <div class="custom-control custom-checkbox">
                                            <input type="checkbox" class="custom-control-input"
                                                   id="friday" data-parsley-multiple="groups"
                                                   data-parsley-mincheck="2" checked>
                                            <label class="custom-control-label" for="friday">
                                                Friday
                                            </label>
                                        </div>
                                        <div class="custom-control custom-checkbox">
                                            <input type="checkbox" class="custom-control-input"
                                                   id="saturday" data-parsley-multiple="groups"
                                                   data-parsley-mincheck="2">
                                            <label class="custom-control-label" for="saturday">
                                                Saturday
                                            </label>
                                        </div>
                                        <div class="custom-control custom-checkbox">
                                            <input type="checkbox" class="custom-control-input"
                                                   id="sunday" data-parsley-multiple="groups"
                                                   data-parsley-mincheck="2">
                                            <label class="custom-control-label" for="sunday">
                                                Sunday
                                            </label>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div id="selected_dates">
                            <form method="POST" class="form-horizontal well" role="form">
                                <fieldset>
                                    <div class="repeater-custom-show-hide">
                                        <div data-repeater-list="car">

                                            <div data-repeater-item="">
                                                <div class="form-group row d-flex align-items-end">
                                                    <div class="col-sm-8">
                                                        <input id="selected-date-item" type="date" name="car[0][date]"
                                                               class="form-control">
                                                    </div>
                                                    <div class="col-sm-4">
                                                            <span data-repeater-delete="" class="btn btn-danger">
                                                                Remove
                                                            </span>
                                                    </div>
                                                </div>
                                            </div>

                                        </div>
                                        <div class="form-group row mb-0">
                                            <div class="col-sm-12">
                                                    <span data-repeater-create="" class="btn btn-light btn-md">
                                                        <span class="fa fa-plus"></span> Add Date
                                                    </span>
                                            </div>
                                        </div>
                                    </div>
                                </fieldset>
                            </form>
                        </div>
                    </div>
                </div>
                <div class="card-body border-top">
                    <button type="submit" class="btn btn-primary">
                        <i class="fa fa-check-circle"></i> Submit
                    </button>
                </div>
            </div>


        </div>
    </div>

{% endblock %}

{% block base_internal_scripts %}
    <script src="{% static 'core/plugins/repeater/jquery.repeater.min.js' %}"></script>
    <script src="{% static 'core/pages/jquery.form-repeater.js' %}"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-datetimepicker/2.5.20/jquery.datetimepicker.full.min.js"
            integrity="sha256-FEqEelWI3WouFOo2VWP/uJfs1y8KJ++FLh2Lbqc8SJk=" crossorigin="anonymous"></script>
{% endblock %}

{% block base_external_scripts %}

    <script>
        $(document).ready(function () {

            let customize = $("#customize");
            let weekly_div = $("#weekly");
            let dates_div = $("#selected_dates");

            init();

            $('#id_repeat_policy').change(function () {
                switch ($(this).val()) {
                    case 'w':
                        customize.show();
                        weekly_div.show();
                        dates_div.hide();
                        break;

                    case 'd':
                        customize.show();
                        weekly_div.hide();
                        dates_div.show();
                        break;

                    default:
                        customize.hide();
                        weekly_div.hide();
                        dates_div.hide();
                }
            })

            $('#id_start_date').datetimepicker({
                format: 'Y-m-d',
                timepicker: false,
            });
            $('#id_end_date').datetimepicker({
                format: 'Y-m-d',
                timepicker: false,
            });

            $('#id_start_time').datetimepicker({
                datepicker: false,
                format: 'H:i:s'
            });
            $('#id_end_time').datetimepicker({
                datepicker: false,
                format: 'H:i:s'
            });

            function init(){
                customize.hide();
            }

        })
    </script>

{% endblock %}